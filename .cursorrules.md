# Career Chute - Cursor AI Rules

## üö® CRITICAL SECURITY RULES

### NEVER COMMIT SENSITIVE DATA
- **NO** API keys, tokens, secrets, or credentials in code
- **NO** hardcoded passwords or authentication data
- **NO** personal access tokens or OAuth secrets
- **NO** database connection strings with credentials
- **NO** Firebase private keys or service account files

### SECURITY CHECKLIST BEFORE EVERY COMMIT
1. ‚úÖ Search for: `apiKey`, `secret`, `token`, `password`, `credential`
2. ‚úÖ Check for hardcoded URLs with credentials
3. ‚úÖ Verify no `.env` files or config files with secrets
4. ‚úÖ Ensure all sensitive data uses environment variables or user input

### GITHUB TOKEN SECURITY
- **NEVER** include GitHub tokens in git remote URLs
- Use SSH keys or GitHub CLI for authentication
- If using HTTPS, use `gh auth login` instead of embedding tokens

## üìß GMAIL INTEGRATION RULES

### OAuth Implementation
- Client ID comes from user input, never hardcoded
- Access tokens are stored in state, not committed
- All Gmail API calls use proper error handling
- Token refresh is automatic and transparent

### Data Handling
- Email content is processed locally, not stored
- Only metadata (scan results) is saved to Firebase
- No email content is logged or committed

## üîß DEVELOPMENT RULES

### Code Quality
- Use TypeScript-style JSDoc comments
- Implement proper error handling for all API calls
- Follow existing code patterns and naming conventions
- Test OAuth flows before committing

### Firebase Integration
- All user data is properly scoped to userId
- No cross-user data access
- Proper cleanup of old data
- Realtime sync with conflict resolution

### UI/UX
- Maintain consistent design system
- Responsive design for all screen sizes
- Accessible color contrast and interactions
- Clear error messages and loading states

## üö´ FORBIDDEN PATTERNS

```javascript
// ‚ùå NEVER DO THIS
const API_KEY = "sk-1234567890abcdef";
const clientId = "1234567890-abcdef.apps.googleusercontent.com";
const secret = "GOCSPX-abcdef123456";

// ‚úÖ ALWAYS DO THIS
const clientId = state.gmail.clientId; // From user input
const apiKey = process.env.API_KEY; // From environment
```

## üîç PRE-COMMIT SECURITY SCAN

Before every commit, run:
```bash
# Check for hardcoded secrets
grep -r -i "api.*key\|secret\|token\|password" . --exclude-dir=.git --exclude="*.md"
grep -r "ghp_\|gho_\|ghu_\|ghs_\|ghr_" . --exclude-dir=.git
```

## üìù COMMIT MESSAGE FORMAT

- `feat:` New features
- `fix:` Bug fixes  
- `security:` Security improvements
- `refactor:` Code improvements
- `docs:` Documentation updates

Example: `feat: Add Gmail OAuth integration with proper security`

## üõ°Ô∏è EMERGENCY PROCEDURES

If sensitive data is accidentally committed:
1. **IMMEDIATELY** revoke any exposed tokens/keys
2. Remove sensitive data from git history
3. Force push to overwrite remote history
4. Update all affected services with new credentials
5. Audit access logs for any unauthorized usage

## üìã PROJECT-SPECIFIC RULES

### Career Chute App
- Single HTML file architecture
- Firebase for data persistence
- Gmail API for email scanning
- Local storage as backup
- Netlify for deployment

### File Structure
- `index.html` - Main application file
- `PROJECT.md` - Project documentation
- `.cursorrules.md` - This file
- `.gitignore` - Git ignore patterns

### Deployment
- Netlify handles environment variables
- No build process required
- Direct HTML deployment
- CORS properly configured

## üéØ APP FEATURE REQUIREMENTS

### Core Functionality (MUST NOT BREAK)
1. **Job Application Pipeline**
   - Add applications manually or via Gmail scan
   - Track status: queued ‚Üí applied ‚Üí interview ‚Üí offer
   - Time blocking and task management
   - Progress tracking and milestones

2. **Gmail Integration**
   - OAuth 2.0 authentication
   - Email scanning for job alerts
   - Automatic parsing of job details
   - Email marking as read after processing

3. **Job Prioritization System**
   - Role title grading (A/B/C/ungraded)
   - City grading and filtering
   - Employer blocking
   - Bulk selection by grade
   - Persistent grading rules (survives queue clearing)

4. **Google Sheets Integration**
   - One-way sync from app to Sheets
   - Smart sync (update by ID, append new)
   - Preserves user-made changes in Sheets
   - Networking contacts sync

5. **Field Mapping Training**
   - Review email parsing accuracy
   - Correct parsing errors
   - Train system for better accuracy
   - Real-time field editing

### Data Persistence Requirements
- **Role grades persist** even when applications are cleared
- **City grades persist** independently of current jobs
- **Blocked employers persist** across sessions
- **Blocked cities persist** across sessions
- **Gmail connection state** persists across sessions

### UI/UX Requirements
- **Navigation tabs**: Today, Plan, Progress, Job Queue, Mapping, Settings
- **Responsive design** for all screen sizes
- **Dark/light mode** toggle
- **Real-time updates** without page refresh
- **Bulk actions** for job management
- **Color-coded grading** system

### Security Requirements
- **No hardcoded secrets** in code
- **User-provided OAuth credentials** only
- **Local data processing** (no server-side storage)
- **Secure token handling** with automatic refresh

## ‚ö†Ô∏è CHANGE IMPACT WARNINGS

### Before Making Changes, Check:
1. **Will this break Gmail OAuth flow?**
2. **Will this affect job prioritization persistence?**
3. **Will this break Google Sheets sync?**
4. **Will this affect the field mapping training tool?**
5. **Will this break the bulk selection system?**
6. **Will this affect the role/city grading UI updates?**

### High-Risk Areas:
- `state` object structure changes
- Gmail API integration functions
- Firebase sync functions
- UI rendering functions
- Field mapping and parsing logic

### Safe to Modify:
- CSS styling (with caution for responsive design)
- UI text and labels
- Non-core feature additions
- Documentation and comments